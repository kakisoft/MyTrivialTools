<!DOCTYPE html>
<html lang="ja">
  <head>
      <meta charset="utf8">
      <title>Soften InsertStatement</title>
  </head>
<body>
<h1 style="font-size: 1.5em">insert文のカラムを合わせたい的な何か</h1>
<div>
  <textarea id="target_syntax" style="width:60%; height:10em" placeholder="Please input any code."></textarea>
</div>

<p>
  <button type="button" id="soften_InsertStatement">Soften InsertStatement</button>
</p>
<p>
  <textarea id="result_syntax" style="width:95%; height:13em" ></textarea>
</p>

<script>

NEW_LINE_CHARACTER = "\n";

targetSyntaxElement = document.getElementById("target_syntax");
resultSyntaxElement = document.getElementById("result_syntax");

//=================================================================
//----------------------
//   For Develop Code
//----------------------
var forDev1;
forDev1 = "";
// forDev1 += ""  + "\n";
forDev1 += "INSERT INTO  "  + "\n";
forDev1 += "__TABLENAME__ "  + "\n";
forDev1 += "("  + "\n";
forDev1 += " id,"  + "\n";
forDev1 += " name,"  + "\n";
forDev1 += " emai"  + "\n";
forDev1 += ")"  + "\n";
forDev1 += "VALUES"  + "\n";
forDev1 += "("  + "\n";
forDev1 += "1,"  + "\n";
forDev1 += "kaki,"  + "\n";
forDev1 += "a@b"  + "\n";
forDev1 += ")"  + "\n";

document.getElementById("target_syntax").innerHTML = forDev1;
//=================================================================


document.getElementById("soften_InsertStatement").addEventListener("click", softenInsertStatement)

//======================================
//      Soften Insert Statement
//======================================
function softenInsertStatement(){
  var targetSyntaxContent = targetSyntaxElement.value;
  var resultContentArray = [];

  //-----< Set ResultChunkSet >-----
  var resultChunkSet = [];
  setResultChunkSet(resultChunkSet, targetSyntaxContent);

  //-----< Set Result Contents >-----
  setResultContents(resultContentArray, resultChunkSet);

  //-----< Output Result >-----
  resultSyntaxElement.textContent = resultContentArray[0];

}

//=======================================================================================================
//=======================================================================================================

//--------------------------
//   Set ResultChunkSet
//--------------------------
function setResultChunkSet(resultChunkSet, targetSyntaxContent){
  CHUNK_START_CHAR = "(";
  CHUNK_END_CHAR   = ")";

  var chunkStartPositionArray = getChunkStartPositionArray(CHUNK_START_CHAR, targetSyntaxContent)
  var chunkEndPositionArray   = getChunkStartPositionArray(CHUNK_END_CHAR  , targetSyntaxContent)

  if( !(chunkStartPositionArray.length == 2 && chunkEndPositionArray.length == 2) ){
      return false;
  }

  var chunk1 = targetSyntaxContent.slice(chunkStartPositionArray[0]+1 ,chunkEndPositionArray[0]).trim();
  var chunk2 = targetSyntaxContent.slice(chunkStartPositionArray[1]+1 ,chunkEndPositionArray[1]).trim();

  var splittedChunk1 = chunk1.split(",");
  var splittedChunk2 = chunk2.split(",");

  resultChunkSet[0] = splittedChunk1;
  resultChunkSet[1] = splittedChunk2;

  return true;
}

//--------------------------
//   Set Result Contents
//--------------------------
function setResultContents(resultSyntaxContent, resultChunkSet){
  var tmpArray = [];

  for(var i=0; i < resultChunkSet[0].length; i++){
    var el = resultChunkSet[0][i].trim() + "\t" +  resultChunkSet[1][i].trim();
    tmpArray.push(el);
  }
  resultSyntaxContent[0] = tmpArray.join(NEW_LINE_CHARACTER);

  return;
}

//=======================================================================================================
//=======================================================================================================

</script>
<script src="./utils/KakiUtils.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="ja">
  <head>
      <meta charset="utf8">
      <title>Seq</title>
  </head>
<body>

<div>
  <input type="radio" name="formatType" value="1" checked>tsv
  <input type="radio" name="formatType" value="2">csv

  <input type="checkbox" checked="checked" id="is_special_control_firstline" style="margin-left: 10em">１行目をデータ定義として扱う。（「c」の場合 『"』で囲む）
</div>

<br>
<div>
  <input type="text" value="__TABLENAME__">
  <br><br>
  <textarea id="target-syntax" cols="100" rows="10" placeholder="Please input any code."></textarea>
</div>

<p>
  <button type="button" id="create-InsertStatement">create-InsertStatement</button>
</p>
<p>
  <textarea id="result-syntax" cols="100" rows="10"></textarea>
</p>

<script>

var forDev1;
forDev1 = "";
// forDev1 += ""  + "\n";

forDev1 += "	c		c	c"  + "\n";
forDev1 += "id	name	age	email	company_name"  + "\n";
forDev1 += "1	kaki	20	a@cbom	ペーパー"  + "\n";
forDev1 += "2	soft	30	b@cbom	架空"  + "\n";




document.getElementById("target-syntax").innerHTML = forDev1;

// console.log("sss")


var FORMAT_TYPE = {
  TSV : 1,
  CSV : 2,
};

function getSplitChar(){
  var switchKey = getSelectedRadioButtonValue("formatType")

  switch (parseInt(switchKey)){
    case FORMAT_TYPE.TSV:
      return "\t"
    case FORMAT_TYPE.CSV:
      return ","
  }
}

document.getElementById("create-InsertStatement").addEventListener("click", createInsertStatement)


//======================================
//           
//======================================
function createInsertStatement(){
  NEW_LINE_CHARACTER = "\n";

  var splitChar = getSplitChar();
  var isSpecialControlFirstline = document.getElementById("is_special_control_firstline").checked;

  var resultSyntaxContentArray = [];
  var targetSyntaxElement = document.getElementById("target-syntax");
  var targetSyntaxContent = targetSyntaxElement.value;


  var targetSyntaxContentArray =  targetSyntaxContent.split(/\r?\n/g);



  // console.log(splitChar);



//   targetSyntaxContentArray.forEach((lineUnitElement)=>{
//     var linerContentArray = [];
//     var linerContentArray = lineUnitElement.split(splitChar);

// console.log(splitChar)
//     linerContentArray.forEach(function(cellUnitElement) {
//       console.log(cellUnitElement)  

//     });

//   });


  var columnNameLine;
  // var dataStartLine;
  if(isSpecialControlFirstline){
    columnNameLine = 1;
  }else{
    columnNameLine = 0;
  }

  // var targetSyntaxContentArray =  targetSyntaxContent.split(/\r?\n/g);
  var columnNameArray = targetSyntaxContentArray[columnNameLine].split(splitChar);
  var numberOfColumn = columnNameArray.length;

  var columnStatement = columnNameArray.join(",");
  // var resultSyntaxContent = resultSyntaxContentArray.join(NEW_LINE_CHARACTER);


console.log(columnNameArray)
console.log(columnStatement)
  // insert into () value ();

  //-----＜ discription ＞-----
  for(var i=(columnNameLine+1); i < targetSyntaxContentArray.length; i++){
    

    
    // [i] =  targetSyntaxContentArray[i] + NEW_LINE_CHARACTER
                                //  + targetSyntaxContentArray2[i] + NEW_LINE_CHARACTER
                                //  + targetSyntaxContentArray3[i] + NEW_LINE_CHARACTER
  }

  
  //-----＜ 処理結果を出力 ＞-----
  outputResult(resultSyntaxContentArray);
}

//====================
//     結果を出力
//====================
function outputResult(resultSyntaxContentArray){
  var resultSyntaxElement = document.getElementById("result-syntax");
  var resultSyntaxContent = resultSyntaxContentArray.join(NEW_LINE_CHARACTER);
  resultSyntaxElement.textContent = resultSyntaxContent;
}
</script>
<script src="./utils/KakiUtils.js"></script>
</body>
</html>